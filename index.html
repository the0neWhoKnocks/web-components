<html>
  <head>
    <title>Web Components</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1 minimum-scale=1">
    
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="example/examples.css">
    
    <script src="js/components/hybrid/CustomAutoCompleteInput.js"></script>
    <script src="js/components/hybrid/CustomIconCheck.js"></script>
    <script src="js/components/hybrid/CustomIconChevron.js"></script>
    <script src="js/components/hybrid/CustomToggle.js"></script>
    <script src="js/components/hybrid/CustomTimeline.js"></script>
    <script src="js/components/js-only/CustomDialog.js"></script>
    <script src="js/components/js-only/CustomFlyout.js"></script>
  </head>
  <body>
    <div id="wrapper">
      <section>
        <h2 class="title">Timeline</h2>
        
        <nav>
          <label>
            Points
            <input type="number" id="timelinePoints" min="2" max="20" value="2" />
          </label>
          <label>
            Point Radius
            <input type="number" id="timelinePointRadius" min="0.5" max="5" value="1.5" step="0.25" />
          </label>
          <label>
            Scale
            <input type="number" id="timelineScale" min="0.5" max="3" value="1" step="0.25" />
          </label>
          <label>
            Stroke Color
            <input type="color" id="timelineStrokeColor" value="#dedede" />
          </label>
          <label>
            Stroke Width
            <input type="number" id="timelineStrokeWidth" min="0.01" max="1" value="0.25" step="0.01" />
          </label>
        </nav>
        
        <div class="timelines-wrapper">
          <custom-timeline vertical points="3"></custom-timeline>
          <custom-timeline id="defaultTimeline"></custom-timeline>
          <custom-timeline points="4"></custom-timeline>
          <custom-timeline points="4" pointStates="1,s; 2,f; 3,r"></custom-timeline>
        </div>
        
        <style>
          .timelines-wrapper {
            display: grid;
            grid-gap: 1em;
            grid-template-areas:
              "v ."
              "v ."
              "v .";
            grid-template-columns: 1.5em auto;
          }
          .timelines-wrapper custom-timeline[vertical] {
            grid-area: v;
          }
        </style>
        
        <script>
          const defaultTimeline = document.getElementById('defaultTimeline');
          const timelines = [...document.querySelectorAll('custom-timeline')];
          const timelinesWrapper = document.querySelector('.timelines-wrapper');
          
          document.getElementById('timelinePoints').addEventListener('input', ({ currentTarget: { value } }) => {
            defaultTimeline.points = value;
          });
          document.getElementById('timelinePointRadius').addEventListener('input', ({ currentTarget: { value } }) => {
            timelinesWrapper.style.gridTemplateColumns = `${value}em auto`;
            timelines.forEach((timeline, ndx) => {
              if (ndx === 0) timeline.setAttribute('pointRadius', value);
              else timeline.pointRadius = value;
            });
          });
          document.getElementById('timelineScale').addEventListener('input', ({ currentTarget: { value } }) => {
            timelinesWrapper.style.fontSize = `${value}em`;
          });
          document.getElementById('timelineStrokeColor').addEventListener('input', ({ currentTarget: { value } }) => {
            timelines.forEach((timeline, ndx) => {
              if (ndx === 0) timeline.setAttribute('strokeColor', value);
              else timeline.strokeColor = value;
            });
          });
          document.getElementById('timelineStrokeWidth').addEventListener('input', ({ currentTarget: { value } }) => {
            timelines.forEach((timeline, ndx) => {
              if (ndx === 0) timeline.setAttribute('strokeWidth', value);
              else timeline.strokeWidth = value;
            });
          });
        </script>
      </section>
      <section>
        <h2 class="title">Icons</h2>
        
        <nav>
          <button type="button" id="animateIcons">Animate</button>
          <label>
            Scale
            <input type="number" id="iconScale" min="1" max="5" value="1" />
          </label>
          <label>
            Stroke Color
            <input type="color" id="iconStrokeColor" value="#333333" />
          </label>
          <label>
            Stroke Width
            <input type="number" id="iconStrokeWidth" min="1" max="10" value="2" />
          </label>
        </nav>
        
        <section>
          <h3 class="title">Chevron</h2>
            
          <nav>
            <label>
              Length
              <input type="number" id="chevronLength" min="0.5" max="1" value="0.5" step="0.1" />
            </label>
          </nav>
          
          <div class="scale-wrapper">
            <div class="icon-wrapper">
              <custom-icon-chevron direction="up"></custom-icon-chevron>
            </div>
            <div class="icon-wrapper">
              <custom-icon-chevron direction="down"></custom-icon-chevron>
            </div>
            <div class="icon-wrapper">
              <custom-icon-chevron direction="left"></custom-icon-chevron>
            </div>
            <div class="icon-wrapper">
              <custom-icon-chevron direction="right" fit></custom-icon-chevron>
            </div>
          </div>
          
        </section>
        <section>
          <h3 class="title">Check</h2>
          <div class="scale-wrapper">
            <div class="icon-wrapper">
              <custom-icon-check on></custom-icon-check>
            </div>
            <div class="icon-wrapper">
              <custom-icon-check animate off></custom-icon-check>
            </div>
            <div class="icon-wrapper">
              <custom-icon-check animate on></custom-icon-check>
            </div>
          </div>
        </section>
        
        <style>
          .icon-wrapper {
            padding: 0.5em;
            border: solid 1px;
            vertical-align: middle;
            display: inline-flex;
            align-items: center;
          }
        </style>
        
        <script>
          const checks = [...document.querySelectorAll('custom-icon-check')];
          const chevrons = [...document.querySelectorAll('custom-icon-chevron')];
          const scaleWrappers = [...document.querySelectorAll('.scale-wrapper')];
          
          document.getElementById('animateIcons').addEventListener('click', () => {
            checks.forEach((check) => {
              check.on = !check.on;
            });
            chevrons.forEach((chevron) => { chevron.toggle(); });
          });
          document.getElementById('chevronLength').addEventListener('input', ({ currentTarget: { value } }) => {
            chevrons.forEach((chevron, ndx) => {
              if (ndx === 0) chevron.setAttribute('length', value);
              else chevron.length = value;
            });
          });
          document.getElementById('iconScale').addEventListener('input', ({ currentTarget: { value } }) => {
            scaleWrappers.forEach(el => { el.style.fontSize = `${value}em`; });
          });
          document.getElementById('iconStrokeColor').addEventListener('input', ({ currentTarget: { value } }) => {
            checks.forEach((check, ndx) => {
              if (ndx === 0) check.setAttribute('strokeColor', value);
              else check.strokeColor = value;
            });
            chevrons.forEach((chevron, ndx) => {
              if (ndx === 0) chevron.setAttribute('strokeColor', value);
              else chevron.strokeColor = value;
            });
          });
          document.getElementById('iconStrokeWidth').addEventListener('input', ({ currentTarget: { value } }) => {
            checks.forEach((check, ndx) => {
              if (ndx === 0) check.setAttribute('strokeWidth', value);
              else check.strokeWidth = value;
            });
            chevrons.forEach((chevron, ndx) => {
              if (ndx === 0) chevron.setAttribute('strokeWidth', value);
              else chevron.strokeWidth = value;
            });
          });
        </script>
      </section>
      <section id="autoCompleteExample">
        <h2 class="title">Auto-Complete Inputs</h2>
        <custom-auto-complete-input
          placeholder="Filter Animals"
          styles="
            .custom-autocomplete__list-item button {
              margin: 0;
              display: flex;
              align-items: center;
            }
            .custom-autocomplete__list-item button * {
              pointer-events: none;
            }
            .custom-autocomplete .icon {
              width: 1em;
              height: 1em;
              border-radius: 100%;
              margin-right: 0.5em;
              background: pink;
              display: inline-block;
            }
          "
        ></custom-auto-complete-input>
        <script>
          const autoCompleteInput = document.querySelector('custom-auto-complete-input');
          
          autoCompleteInput.onSelect = ({ elements: filters, value }) => {
            const matches = filters.map(({ dataset: { rawValue } }) => rawValue);
            alert(`Matches for "${value}":\n${JSON.stringify(matches, null, 2)}`);
          };
          autoCompleteInput.items = [
            "Alligator Snapping Turtle",
            "Baja California Pronghorn Buck",
            "California Condor",
            "Desert Bighorn Ram",
            "Eastern Turkey Vulture",
            "Fer-de-Lance Snake",
            "Golden Crowned Sparrow",
            "Hereford Bull",
            "Java Chicken",
            "Labrador Retriever",
            "Mallard Duck",
            "Neotropic Cormorant",
            "Old Spot Pig",
            "Pacific Loon",
            "Rainbow Boa Snake",
            "Sandhill Crane",
            "Timber Rattlesnake",
            "Virginia Opossum",
            "Whooping Crane",
          ].map((txt) => ({
            attributes: { 'data-raw-value': txt },
            label: `<span class="icon"></span>${txt}`,
            value: txt.toLowerCase().replace(/\s/g, '-'),
          }));
          
          // add a couple more items to the existing list
          autoCompleteInput.items = [
            ...autoCompleteInput.items,
            ...[
              "Wild Boar",
              "Yellow-billed Loon",
            ].map((txt) => ({
              attributes: { 'data-raw-value': txt },
              label: txt, // `value` will equal `label`, and no icon will be present
            })),
          ];
        </script>
      </section>
      <section>
        <h2 class="title">Toggle</h2>
        <div class="toggles">
          <form id="toggleForm">
            <!-- enabled on load -->
            <custom-toggle enabled></custom-toggle>
            <!-- custom id and name -->
            <custom-toggle id="custom" name="someName"></custom-toggle>
            <!-- nothing to see here -->
            <custom-toggle></custom-toggle>
          </form>
          <pre></pre>
        </div>
        <script>
          const toggleForm = document.getElementById('toggleForm');
          const togglesOutput = document.querySelector('#toggleForm + pre');
          const toggles = [...document.querySelectorAll('custom-toggle')];
          
          // Append any Custom Element data to Form data when it's requested.
          // Only neccessary for Custom Elements using the Shadow DOM.
          toggleForm.addEventListener('formdata', ({ formData }) => {
            [...document.querySelectorAll('custom-toggle')].forEach((toggle) => {
              formData.append(toggle.name, toggle.enabled);
            });
          });
          
          function handleToggle() {
            const formData = new FormData(toggleForm);
            const output = [...formData.entries()]
              .map(([name, value]) => `${name}: ${value}`)
              .join('\n');
            
            togglesOutput.textContent = output;
          }
          
          toggles.forEach(toggle => toggle.onToggle = handleToggle);
          
          handleToggle();
        </script>
      </section>
      <section id="dialogExample">
        <h2 class="title">Dialogs</h2>
      </section>
      <section>
        <h2 class="title">Flyouts</h2>
        <div id="flyoutExample"></div>
      </section>
    </div>
    <script src="example/examples.js"></script>
  </body>
</html>