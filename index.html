<html>
  <head>
    <title>Web Components</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1 minimum-scale=1">
    
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="example/examples.css">
    
    <script src="js/components/hybrid/CustomAutoCompleteInput.js"></script>
    <script src="js/components/hybrid/CustomIconChevron.js"></script>
    <script src="js/components/hybrid/CustomToggle.js"></script>
    <script src="js/components/js-only/CustomDialog.js"></script>
    <script src="js/components/js-only/CustomFlyout.js"></script>
  </head>
  <body>
    <div id="wrapper">
      <section>
        <h2 class="title">Icons</h2>
        <nav>
          <button type="button" id="animateIcons">Animate</button>
          <label>
            Scale
            <input type="number" id="scaleIcons" min="1" max="5" value="1" />
          </label>
          <label>
            Stroke Color
            <input type="color" id="iconsStrokeColor" value="#333333" />
          </label>
          <label>
            Stroke Width
            <input type="number" id="iconsStrokeWidth" min="0.1" max="1" value="0.2" step="0.1" />
          </label>
        </nav>
        <section>
          <h3 class="title">Chevron</h2>
          <div class="size-wrapper">
            <custom-icon-chevron direction="up"></custom-icon-chevron>
            <custom-icon-chevron direction="down"></custom-icon-chevron>
            <custom-icon-chevron direction="left"></custom-icon-chevron>
            <custom-icon-chevron direction="right"></custom-icon-chevron>
          </div>
        </section>
        <script>
          const chevrons = [...document.querySelectorAll('custom-icon-chevron')];
          const sizeWrappers = [...document.querySelectorAll('.size-wrapper')];
          
          document.getElementById('animateIcons').addEventListener('click', () => {
            chevrons.forEach((chevron) => {
              switch (chevron.direction) {
                case 'up': { chevron.setAttribute('direction', 'down'); break; }
                case 'down': { chevron.direction = 'up'; break; }
                case 'left': { chevron.direction = 'right'; break; }
                case 'right': { chevron.direction = 'left'; break; }
              }
            });
          });
          document.getElementById('scaleIcons').addEventListener('input', ({ currentTarget: { value } }) => {
            sizeWrappers.forEach(el => {
              el.style.fontSize = `${value}em`;
            });
          });
          document.getElementById('iconsStrokeColor').addEventListener('input', ({ currentTarget: { value } }) => {
            chevrons.forEach((chevron, ndx) => {
              if (ndx === 0) chevron.setAttribute('strokeColor', value);
              else chevron.strokeColor = value;
            });
          });
          document.getElementById('iconsStrokeWidth').addEventListener('input', ({ currentTarget: { value } }) => {
            chevrons.forEach((chevron, ndx) => {
              if (ndx === 0) chevron.setAttribute('strokeWidth', value);
              else chevron.strokeWidth = value;
            });
          });
        </script>
      </section>
      <section id="autoCompleteExample">
        <script>
          function handleAutoCompleteSelection({ elements: filters, value }) {
            const matches = filters.map(({ dataset: { rawValue } }) => rawValue);
            alert(`Matches for "${value}":\n${JSON.stringify(matches, null, 2)}`);
          }
          const autoCompleteItems = [
            "Alligator Snapping Turtle",
            "Baja California Pronghorn Buck",
            "California Condor",
            "Desert Bighorn Ram",
            "Eastern Turkey Vulture",
            "Fer-de-Lance Snake",
            "Golden Crowned Sparrow",
            "Hereford Bull",
            "Java Chicken",
            "Labrador Retriever",
            "Mallard Duck",
            "Neotropic Cormorant",
            "Old Spot Pig",
            "Pacific Loon",
            "Rainbow Boa Snake",
            "Sandhill Crane",
            "Timber Rattlesnake",
            "Virginia Opossum",
            "Whooping Crane",
          ].map((txt) => ({
            attributes: { 'data-raw-value': txt },
            label: `<span class="icon"></span>${txt}`,
            value: txt.toLowerCase().replace(/\s/g, '-'),
          }));
        </script>
        <h2 class="title">Auto-Complete Inputs</h2>
        <custom-auto-complete-input
          items="autoCompleteItems"
          onSelect="handleAutoCompleteSelection"
          placeholder="Filter Animals"
          styles="
            .custom-autocomplete__list-item button {
              margin: 0;
              display: flex;
              align-items: center;
            }
            .custom-autocomplete__list-item button * {
              pointer-events: none;
            }
            .custom-autocomplete .icon {
              width: 1em;
              height: 1em;
              border-radius: 100%;
              margin-right: 0.5em;
              background: pink;
              display: inline-block;
            }
          "
        ></custom-auto-complete-input>
        <script>
          const autoCompleteInput = document.querySelector('custom-auto-complete-input');
          // add a couple more items to the existing list
          autoCompleteInput.items = [
            ...autoCompleteInput.items,
            ...[
              "Wild Boar",
              "Yellow-billed Loon",
            ].map((txt) => ({
              attributes: { 'data-raw-value': txt },
              label: txt, // `value` will equal `label`, and no icon will be present
            }))
          ];
        </script>
      </section>
      <section>
        <script>
          function handleToggle() {
            const formData = new FormData(toggleForm);
            const output = [...formData.entries()]
              .map(([name, value]) => `${name}: ${value}`)
              .join('\n');
            
            togglesOutput.textContent = output;
          }
        </script>
        <h2 class="title">Toggle</h2>
        <div class="toggles">
          <form id="toggleForm">
            <!-- enabled on load -->
            <custom-toggle enabled onToggle="handleToggle"></custom-toggle>
            <!-- custom id and name -->
            <custom-toggle id="custom" name="someName" onToggle="handleToggle"></custom-toggle>
            <!-- nothing to see here -->
            <custom-toggle onToggle="handleToggle"></custom-toggle>
          </form>
          <pre></pre>
        </div>
        <script>
          const toggleForm = document.getElementById('toggleForm');
          const togglesOutput = document.querySelector('#toggleForm + pre');
          // Append any Custom Element data to Form data when it's requested.
          // Only neccessary for Custom Elements using the Shadow DOM.
          toggleForm.addEventListener('formdata', ({ formData }) => {
            [...document.querySelectorAll('custom-toggle')].forEach((toggle) => {
              formData.append(toggle.name, toggle.enabled);
            });
          });
          handleToggle();
        </script>
      </section>
      <section id="dialogExample">
        <h2 class="title">Dialogs</h2>
      </section>
      <section>
        <h2 class="title">Flyouts</h2>
        <div id="flyoutExample"></div>
      </section>
    </div>
    <script src="example/examples.js"></script>
  </body>
</html>