<html>
  <head>
    <title>Web Components</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1 minimum-scale=1">
    
    <link rel="stylesheet" href="styles.css">
    
    <script src="js/components/CustomAutoCompleteInput.js"></script>
    <script src="js/components/CustomDialog.js"></script>
    <script src="js/components/CustomFlyout.js"></script>
    <script src="js/components/CustomIconCheck.js"></script>
    <script src="js/components/CustomIconChevron.js"></script>
    <script src="js/components/CustomToggle.js"></script>
    <script src="js/components/CustomTimeline.js"></script>
  </head>
  <body>
    <div id="wrapper">
      <section>
        <h2 class="title">Timeline</h2>
        
        <nav>
          <label>
            Points
            <input type="number" id="timelinePoints" min="2" max="20" value="2" />
          </label>
          <label>
            Point Radius
            <input type="number" id="timelinePointRadius" min="0.5" max="5" value="1.5" step="0.25" />
          </label>
          <label>
            Scale
            <input type="number" id="timelineScale" min="0.5" max="3" value="1" step="0.25" />
          </label>
          <label>
            Stroke Color
            <input type="color" id="timelineStrokeColor" value="#dedede" />
          </label>
          <label>
            Stroke Width
            <input type="number" id="timelineStrokeWidth" min="0.01" max="1" value="0.25" step="0.01" />
          </label>
        </nav>
        
        <div class="timelines-wrapper">
          <custom-timeline vertical points="3"></custom-timeline>
          <custom-timeline id="defaultTimeline"></custom-timeline>
          <custom-timeline points="4"></custom-timeline>
          <custom-timeline points="4" pointStates="1,s; 2,f; 3,r"></custom-timeline>
        </div>
        
        <style>
          .timelines-wrapper {
            display: grid;
            grid-gap: 1em;
            grid-template-areas:
              "v ."
              "v ."
              "v .";
            grid-template-columns: 1.5em auto;
          }
          .timelines-wrapper custom-timeline[vertical] {
            grid-area: v;
          }
        </style>
        
        <script>
          const defaultTimeline = document.getElementById('defaultTimeline');
          const timelines = [...document.querySelectorAll('custom-timeline')];
          const timelinesWrapper = document.querySelector('.timelines-wrapper');
          
          document.getElementById('timelinePoints').addEventListener('input', ({ currentTarget: { value } }) => {
            defaultTimeline.points = value;
          });
          document.getElementById('timelinePointRadius').addEventListener('input', ({ currentTarget: { value } }) => {
            timelinesWrapper.style.gridTemplateColumns = `${value}em auto`;
            timelines.forEach((timeline, ndx) => {
              if (ndx === 0) timeline.setAttribute('pointRadius', value);
              else timeline.pointRadius = value;
            });
          });
          document.getElementById('timelineScale').addEventListener('input', ({ currentTarget: { value } }) => {
            timelinesWrapper.style.fontSize = `${value}em`;
          });
          document.getElementById('timelineStrokeColor').addEventListener('input', ({ currentTarget: { value } }) => {
            timelines.forEach((timeline, ndx) => {
              if (ndx === 0) timeline.setAttribute('strokeColor', value);
              else timeline.strokeColor = value;
            });
          });
          document.getElementById('timelineStrokeWidth').addEventListener('input', ({ currentTarget: { value } }) => {
            timelines.forEach((timeline, ndx) => {
              if (ndx === 0) timeline.setAttribute('strokeWidth', value);
              else timeline.strokeWidth = value;
            });
          });
        </script>
      </section>
      <section>
        <h2 class="title">Icons</h2>
        
        <nav>
          <button type="button" id="animateIcons">Animate</button>
          <label>
            Scale
            <input type="number" id="iconScale" min="1" max="5" value="1" />
          </label>
          <label>
            Stroke Color
            <input type="color" id="iconStrokeColor" value="#333333" />
          </label>
          <label>
            Stroke Width
            <input type="number" id="iconStrokeWidth" min="1" max="10" value="2" />
          </label>
        </nav>
        
        <section>
          <h3 class="title">Chevron</h2>
            
          <nav>
            <label>
              Length
              <input type="number" id="chevronLength" min="0.5" max="1" value="0.5" step="0.1" />
            </label>
          </nav>
          
          <div class="scale-wrapper">
            <div class="icon-wrapper">
              <custom-icon-chevron direction="up"></custom-icon-chevron>
            </div>
            <div class="icon-wrapper">
              <custom-icon-chevron direction="down"></custom-icon-chevron>
            </div>
            <div class="icon-wrapper">
              <custom-icon-chevron direction="left"></custom-icon-chevron>
            </div>
            <div class="icon-wrapper">
              <custom-icon-chevron direction="right" fit></custom-icon-chevron>
            </div>
          </div>
          
        </section>
        <section>
          <h3 class="title">Check</h2>
          <div class="scale-wrapper">
            <div class="icon-wrapper">
              <custom-icon-check on></custom-icon-check>
            </div>
            <div class="icon-wrapper">
              <custom-icon-check animate off></custom-icon-check>
            </div>
            <div class="icon-wrapper">
              <custom-icon-check animate on></custom-icon-check>
            </div>
          </div>
        </section>
        
        <style>
          .icon-wrapper {
            padding: 0.5em;
            border: solid 1px;
            vertical-align: middle;
            display: inline-flex;
            align-items: center;
          }
        </style>
        
        <script>
          const checks = [...document.querySelectorAll('custom-icon-check')];
          const chevrons = [...document.querySelectorAll('custom-icon-chevron')];
          const scaleWrappers = [...document.querySelectorAll('.scale-wrapper')];
          
          document.getElementById('animateIcons').addEventListener('click', () => {
            checks.forEach((check) => {
              check.on = !check.on;
            });
            chevrons.forEach((chevron) => { chevron.toggle(); });
          });
          document.getElementById('chevronLength').addEventListener('input', ({ currentTarget: { value } }) => {
            chevrons.forEach((chevron, ndx) => {
              if (ndx === 0) chevron.setAttribute('length', value);
              else chevron.length = value;
            });
          });
          document.getElementById('iconScale').addEventListener('input', ({ currentTarget: { value } }) => {
            scaleWrappers.forEach(el => { el.style.fontSize = `${value}em`; });
          });
          document.getElementById('iconStrokeColor').addEventListener('input', ({ currentTarget: { value } }) => {
            checks.forEach((check, ndx) => {
              if (ndx === 0) check.setAttribute('strokeColor', value);
              else check.strokeColor = value;
            });
            chevrons.forEach((chevron, ndx) => {
              if (ndx === 0) chevron.setAttribute('strokeColor', value);
              else chevron.strokeColor = value;
            });
          });
          document.getElementById('iconStrokeWidth').addEventListener('input', ({ currentTarget: { value } }) => {
            checks.forEach((check, ndx) => {
              if (ndx === 0) check.setAttribute('strokeWidth', value);
              else check.strokeWidth = value;
            });
            chevrons.forEach((chevron, ndx) => {
              if (ndx === 0) chevron.setAttribute('strokeWidth', value);
              else chevron.strokeWidth = value;
            });
          });
        </script>
      </section>
      <section id="autoCompleteExample">
        <h2 class="title">Auto-Complete Inputs</h2>
        
        <custom-auto-complete-input
          customStyles="
            .custom-autocomplete__list-item button {
              margin: 0;
              display: flex;
              align-items: center;
            }
            .custom-autocomplete__list-item button * {
              pointer-events: none;
            }
            .custom-autocomplete .icon {
              width: 1em;
              height: 1em;
              border-radius: 100%;
              margin-right: 0.5em;
              background: pink;
              display: inline-block;
            }
          "
          placeholder="Filter Animals"
        ></custom-auto-complete-input>
        
        <style>
          #autoCompleteExample custom-auto-complete-input {
            --max-list-height: 30vh;
            
            width: 70vw;
            max-width: 600px;
            z-index: 1;
          }
        </style>
        
        <script>
          const autoCompleteInput = document.querySelector('custom-auto-complete-input');
          
          autoCompleteInput.addEventListener(window.CustomAutoCompleteInput.events.selected, ({
            detail: { elements: filters, value },
          }) => {
            const matches = filters.map(({ dataset: { rawValue } }) => rawValue);
            console.log(`Matches for "${value}":\n${JSON.stringify(matches, null, 2)}`);
          });
          autoCompleteInput.items = [
            "Alligator Snapping Turtle",
            "Baja California Pronghorn Buck",
            "California Condor",
            "Desert Bighorn Ram",
            "Eastern Turkey Vulture",
            "Fer-de-Lance Snake",
            "Golden Crowned Sparrow",
            "Hereford Bull",
            "Java Chicken",
            "Labrador Retriever",
            "Mallard Duck",
            "Neotropic Cormorant",
            "Old Spot Pig",
            "Pacific Loon",
            "Rainbow Boa Snake",
            "Sandhill Crane",
            "Timber Rattlesnake",
            "Virginia Opossum",
            "Whooping Crane",
          ].map((txt) => ({
            attributes: { 'data-raw-value': txt },
            label: `<span class="icon"></span>${txt}`,
            value: txt.toLowerCase().replace(/\s/g, '-'),
          }));
          
          // add a couple more items to the existing list
          autoCompleteInput.items = [
            ...autoCompleteInput.items,
            ...[
              "Wild Boar",
              "Yellow-billed Loon",
            ].map((txt) => ({
              attributes: { 'data-raw-value': txt },
              label: txt, // `value` will equal `label`, and no icon will be present
            })),
          ];
        </script>
      </section>
      <section>
        <h2 class="title">Toggle</h2>
        
        <div class="toggles">
          <form id="toggleForm">
            <custom-toggle enabled></custom-toggle>
            <custom-toggle id="custom" name="someName"></custom-toggle>
            <custom-toggle circle solid></custom-toggle>
          </form>
          <pre></pre>
        </div>
        
        <style>
          .toggles {
            display: flex;
            align-items: center;
          }
          .toggles form {
            margin: 0;
          }
          .toggles pre {
            width: 100%;
            color: #eee;
            font-size: 1.25em;
            line-height: 1.4em;
            padding: 0.5em 0.75em;
            border-radius: 0.5em;
            margin: 0;
            margin-left: 1em;
            background: #333;
          }
          .toggles custom-toggle {
            display: block;
          }
          .toggles custom-toggle:not(:first-of-type) {
            margin-top: 0.5em;
          }
          .toggles custom-toggle:nth-of-type(3) {
            --color--disabled: #ffa4c8;
            --color--enabled: #46ccff;
            --color--focused: #009827;
            --color--toggle: #daf6da;
          }
        </style>
        
        <script>
          const toggleForm = document.getElementById('toggleForm');
          const togglesOutput = document.querySelector('#toggleForm + pre');
          
          function handleToggle() {
            const formData = new FormData(toggleForm);
            const output = [...formData.entries()]
              .map(([name, value]) => `${name}: ${value}`)
              .join('\n');
            
            togglesOutput.textContent = output;
          }
          
          // Append any Custom Element data to Form data when it's requested.
          // Only neccessary for Custom Elements using the Shadow DOM.
          toggleForm.addEventListener('formdata', ({ formData }) => {
            [...document.querySelectorAll('custom-toggle')].forEach((toggle) => {
              formData.append(toggle.name, toggle.enabled);
            });
          });
          
          toggleForm.addEventListener(window.CustomToggle.events.toggled, handleToggle);
          
          handleToggle();
        </script>
      </section>
      <section id="dialogExample">
        <h2 class="title">Dialogs</h2>
        <button id="openDialogBtn">Open Dialog</button>
        <button id="openModalBtn">Open Modal</button>
        
        <custom-dialog>
          <div class="dialog-title" slot="dialogTitle">Dialog Title</div>
          <div class="dialog-content" slot="dialogBody">
            Click button to close Dialog.
            <button type="button">Close Dialog</button>
          </div>
        </custom-dialog>
        <custom-dialog modal>
          <div class="dialog-title" slot="dialogTitle">Modal Title</div>
          <div class="dialog-content" slot="dialogBody">
            Click button to close Modal.
            <button type="button">Close Modal</button>
          </div>
        </custom-dialog>
        
        <style>
          .dialog-content {
            padding: 1em;
          }
          .dialog-content button {
            width: 100%;
            margin-top: 0.5em;
            display: block;
          }
          .dialog-content .dynamic {
            padding: 0.5em;
            border-radius: 0.25em;
            margin: 0.5em 0;
            background: #73ff73;
          }
        </style>
        
        <script>
          const dE = document.getElementById('dialogExample');
          const dialogs = [...document.querySelectorAll('custom-dialog')];
          const [ dialog, modal ] = dialogs;
          const openDialogBtn = document.getElementById('openDialogBtn');
          const openModalBtn = document.getElementById('openModalBtn');
          
          dE.addEventListener(window.CustomDialog.events.closed, ({ detail: { modal } }) => {
            console.log(`${modal ? 'Modal' : 'Dialog'} closed`);
          });
          
          dialogs.forEach((d) => {
            d.querySelector('[slot] button').addEventListener('click', () => {
              d.open = false;
            });
          });
          
          let contentAdded;
          openDialogBtn.addEventListener('click', () => {
            dialog.open = true;
            
            if (!contentAdded) {
              setTimeout(() => {
                dialog.querySelector('[slot] button').insertAdjacentHTML('beforebegin', `
                  <div class="dynamic">dynamic content added</div>
                `);
                contentAdded = true;
              }, 1000);
            }
          });
          
          openModalBtn.addEventListener('click', () => {
            modal.open = true;
          });
        </script>
      </section>
      <section>
        <h2 class="title">Flyouts</h2>
        
        <div id="flyoutExample">
          <button type="button" data-open-from="top">Open From <b>top</b></button>
          <custom-flyout from="top">
            <div class="title" slot="flyoutTitle">Top Flyout</div>
            <div class="content" slot="flyoutBody">Flyout content.</div>
          </custom-flyout>
          
          <button type="button" data-open-from="right">Open From <b>right</b></button>
          <custom-flyout from="right">
            <div class="title" slot="flyoutTitle">Right Flyout</div>
            <div class="content" slot="flyoutBody">Flyout content.</div>
          </custom-flyout>
          
          <button type="button" data-open-from="bottom">Open From <b>bottom</b></button>
          <custom-flyout from="bottom">
            <div class="title" slot="flyoutTitle">Bottom Flyout</div>
            <div class="content" slot="flyoutBody">Flyout content.</div>
          </custom-flyout>
          
          <button type="button" data-open-from="left">Open From <b>left</b></button>
          <custom-flyout from="left">
            <div class="title" slot="flyoutTitle">Left Flyout</div>
            <div class="content" slot="flyoutBody">Flyout content.</div>
          </custom-flyout>
        </div>
        
        <style>
          #flyoutExample {
            width: 100%;
            height: 10em;
            background: #ddd;
            background-image:
              radial-gradient(#aaa 20%, transparent 0),
              radial-gradient(#aaa 20%, transparent 0);
            background-size: 8px 8px;
            background-position: 0 0, 8px 8px;
            position: relative;
            box-shadow: inset 0 5px 7px 0px #00000050;
            overflow: hidden;
          }
          #flyoutExample button * {
            pointer-events: none;
          }
          #flyoutExample button {
            border: solid 1px #777;
            padding: 1em;
            background: #fff;
            margin: 0;
            box-shadow: 0 5px 7px 0px #00000050;
            position: absolute;
          }
          #flyoutExample [data-open-from="top"],
          #flyoutExample [data-open-from="bottom"] {
            left: 50%;
            transform: translateX(-50%);
          }
          #flyoutExample [data-open-from="top"] {
            border-radius: 0 0 0.5em 0.5em;
            border-top: none;
            top: 0;
          }
          #flyoutExample [data-open-from="bottom"] {
            border-radius: 0.5em 0.5em 0 0;
            border-bottom: none;
            bottom: 0;
          }
          #flyoutExample [data-open-from="left"],
          #flyoutExample [data-open-from="right"] {
            top: 50%;
            transform: translateY(-50%);
          }
          #flyoutExample [data-open-from="left"] {
            border-radius: 0 0.5em 0.5em 0;
            border-left: none;
            left: 0;
          }
          #flyoutExample [data-open-from="right"] {
            border-radius: 0.5em 0 0 0.5em;
            border-right: none;
            right: 0;
          }
        
          #flyoutExample .content {
            min-width: 80vw;
            min-height: 80vh;
            padding: 1em;
          }
        </style>
        
        <script>
          const fE = document.getElementById('flyoutExample');
          
          fE.addEventListener(window.CustomFlyout.events.closed, ({ detail: { from } }) => {
            console.log(`Closed "${from}" Flyout`);
          });
          fE.addEventListener('click', ({ target: { dataset } }) => {
            const { openFrom } = dataset;
          
            if (openFrom) {
              const flyout = document.querySelector(`custom-flyout[from="${openFrom}"]`);
              flyout.open = true;
            }
          });
        </script>
      </section>
    </div>
  </body>
</html>